# Build @PACKAGE_STRING@
#
# @configure_input@
#
# C++ encapsulation of ATMI and a set of tools to help write Tuxedo applications.

prefix=@prefix@
INSTALL=@INSTALL@ 
LOCALEDIR=@localedir@
RM=@RM@
DOXYGEN=@DOXYGEN@
BEAUTIFIER=@BEAUTIFIER@ --no-backup -l CPP --replace -c ./crust.cfg {} \;
PACKAGE=@PACKAGE_NAME@-v@PACKAGE_VERSION@-@build_os@.tar.gz

all: atmi++ utl

demos:
	cd samples/atmi++ ; $(MAKE) globber all clean
#	cd samples/utl ; $(MAKE) globber all clean

atmi++:
	cd src/tuxedo ; $(MAKE) globber all clean

utl:
	cd src/utl ; $(MAKE) globber all clean

pkg:
	tar cf - include lib man html samples | gzip > ${PACKAGE}

globber:
	${RM} -R html man autom4te.cache
	${RM} html man confdefs.h config.status include/atmi++.h autom4te.cache
	cd src/tuxedo ;$(MAKE) globber
	cd src/utl ;$(MAKE) globber

doxygen:
	${DOXYGEN} doxyconf

beautifull:
	cd src/tuxedo ;$(MAKE) beautifull
	cd src/utl ;$(MAKE) beautifull

install:
	${INSTALL} lib/libatmi++.a ${prefix}/lib/libatmi++.a
	${INSTALL} lib/libatmiutl++.a ${prefix}/lib/libatmiutl++.a
	${INSTALL} lib/libcltatmi++.a ${prefix}/lib/libcltatmi++.a
	${INSTALL} lib/libfml++.a ${prefix}/lib/libfml++.a
	${INSTALL} locale/en_US/atmi++.cat ${LOCALEDIR}/en_US/atmi++.cat
	${INSTALL} locale/fr_FR/atmi++.cat ${LOCALEDIR}/fr_FR/atmi++.cat
	for header in include/*.h ; do \
		${INSTALL} $$header ${prefix}/$$header ;\
	done

uninstall:
	${RM} ${prefix}/lib/libatmi++.a
	${RM} ${prefix}/lib/libatmiutl++.a
	${RM} ${prefix}/lib/libcltatmi++.a
	${RM} ${prefix}/lib/libfml++.a
	${RM} ${LOCALEDIR}/en_US/atmi++.cat
	${RM} ${LOCALEDIR}/fr_FR/atmi++.cat
	for header in include/*.h ; do \
		${RM} ${prefix}/$$header ;\
	done

